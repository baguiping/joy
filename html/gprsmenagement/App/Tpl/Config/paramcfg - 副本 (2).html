<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title></title>
<link href="__ROOT__/Public/jquery/mini/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" /> 
<link href="__ROOT__/Public/jquery/mini/lib/ligerUI/skins/Gray/css/all.css" rel="stylesheet" type="text/css" /> 
<link rel="stylesheet" href="__ROOT__/Public/css/style2.css" type="text/css"/> 
<script src="__ROOT__/Public/jquery/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="__ROOT__/Public/jquery/mini/lib/ligerUI/js/core/base.js" type="text/javascript"></script>
<script src="__ROOT__/Public/jquery/mini/lib/ligerUI/js/plugins/ligerTree.js" type="text/javascript"></script>
<script src="__ROOT__/Public/jquery/mini/lib/ligerUI/js/plugins/ligerAccordion.js" type="text/javascript"></script><script src="__ROOT__/Public/jquery/mini/lib/ligerUI/js/plugins/ligerCheckBox.js" type="text/javascript"></script>

<script type="text/javascript"> 
	var URL = "__URL__";
	$(document).ready(	function()
	{   
		$("#seltree").load(URL+"/seltree");
	});
    
	$(function ()
    { 
		$("#accordion1").ligerAccordion(
        {
            height: 650
        });
    });
	
	$(function() {  
        $("#button").click(function() { 	
			var cfgjson = {};
			for($i=1;$i<5;$i++)
		    {
				var cfgarray = {};
				var $a = $("#cfg"+$i).find("input");
				for(var j = 0; j < $a.length; j++) {
					cfgarray[$a.eq(j).attr("name")] = $a.eq(j).attr("value") || '';  
				}
				console.info(JSON.stringify(cfgarray)); 
				cfgjson["cfg"+$i] = cfgarray;	
			}
			console.info(JSON.stringify(cfgjson));
			var cfgstr = JSON.stringify(cfgjson);
		$("#cfgjsonstr").attr("value",cfgstr);
		//getcfgresult();
		});  
    });  
	
function setinput(){
	$("#initialparamset").attr("value",document.getElementById("sel").value);
} 

function getcfgresult(){
	$.ajax({
                type: "get",
                url:"__URL__/getcfgresult",
                //data: "imei=82",
          
                error: function(request) {
                    alert("Connection error");
                },
                success: function(data) {
                    //alert(data.data);
					console.info(data);
                }
            });
}
</script> 

</head>
<body> 
<div style="margin-top:-25px;width:99%;height: 650px;">
<form id="form1" method="post" action="{:U('Config/paramcfgsend')}" name="form1">
	<div id="seltree" position="left" style="float:left;width:20%;margin-top:-5px;">
	</div>
	<div  id="form2" style="float:right;width:78%;margin-top:8px;">
	 <div id="accordion1"> 
         <div title="BMS混合配置" id="cfg1">
			<div position="left" style="float:left;width:49%;">
				<div class="item">
					<span class="title">恢复初始参数设置:</span>
					<select name="sel" id="sel" onchange="setinput()">
						<option value="0">不设定</option>
						<option value="1">设定</option>
					</select>
					<input type="hidden"  class="text_2" value="0" maxlength="20" name="initialparamset" id="initialparamset"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">通讯故障超时时间:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="comalarmthreshold" id="comalarmthreshold"><span>  m</span>
				</div>				
			</div>		
			<div position="mainright" style="float:right;width:50%;">	
				
			</div>				
        </div>
         <div title="告警阀值配置" id="cfg2">
			<div position="left" style="float:left;width:49%;">
				<div class="item">
					<span class="title" style="width:140;">单体电压过高阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagehigh1" id="voltagehigh1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过高阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperhigh1" id="batterytemperhigh1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">回充电流过大阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargecurrentlarge1" id="chargecurrentlarge1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">绝缘电阻过低阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="resistancelow1" id="resistancelow1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过高阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurehigh1" id="batterypressurehigh1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组压差过大阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypredifflarge1" id="batterypredifflarge1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">单体电压过高阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagehigh2" id="voltagehigh2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过高阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperhigh2" id="batterytemperhigh2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">回充电流过大阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargecurrentlarge2" id="chargecurrentlarge2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">绝缘电阻过低阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="resistancelow2" id="resistancelow2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过高阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurehigh2" id="batterypressurehigh2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组压差过大阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypredifflarge2" id="batterypredifflarge2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">单体电压过高阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagehigh3" id="voltagehigh3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过高阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperhigh3" id="batterytemperhigh3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">回充电流过大阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargecurrentlarge3" id="chargecurrentlarge3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">绝缘电阻过低阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="resistancelow3" id="resistancelow3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过高阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurehigh3" id="batterypressurehigh3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组压差过大阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypredifflarge3" id="batterypredifflarge3"><span>  m</span>
				</div>				
			</div>		
			<div position="mainright" style="float:right;width:50%;">	
				<div class="item">
					<span class="title" style="width:140;">单体电压过低阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagelow1" id="voltagelow1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过低阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperlow1" id="batterytemperlow1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">放电电流过大阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="dischargecurrentlarge1" id="dischargecurrentlarge1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">SOC过低阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="soclow1" id="soclow1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过低阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurelow1" id="batterypressurelow1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组温差过大阈值I:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytempdifflarge1" id="batterytempdifflarge1"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">单体电压过低阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagelow2" id="voltagelow2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过低阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperlow2" id="batterytemperlow2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">放电电流过大阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="dischargecurrentlarge2" id="dischargecurrentlarge2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">SOC过低阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="soclow2" id="soclow2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过低阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurelow2" id="batterypressurelow2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组温差过大阈值II:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytempdifflarge2" id="batterytempdifflarge2"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">单体电压过低阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="voltagelow3" id="voltagelow3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池温度过低阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytemperlow3" id="batterytemperlow3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">放电电流过大阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="dischargecurrentlarge3" id="dischargecurrentlarge3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">SOC过低阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="soclow3" id="soclow3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组总压过低阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterypressurelow3" id="batterypressurelow3"><span>  m</span>
				</div>
				<div class="item">
					<span class="title" style="width:140;">电池组温差过大阈值III:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="batterytempdifflarge3" id="batterytempdifflarge3"><span>  m</span>
				</div>
			</div>				
        </div>
        <div title="采集串数配置" id="cfg3">
			<div position="left" style="float:left;width:49%;">
				<div class="item">
					<span class="title">M1电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m1cellnum" id="m1cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M3电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m3cellnum" id="m3cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M5电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m5cellnum" id="m5cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M7电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m7cellnum" id="m7cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M9电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m9cellnum" id="m9cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M11电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m11cellnum" id="m11cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M13电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m13cellnum" id="m13cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M15电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m15cellnum" id="m15cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M17电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m17cellnum" id="m17cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M19电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m19cellnum" id="m19cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M21电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m21cellnum" id="m21cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M23电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m23cellnum" id="m23cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M25电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m25cellnum" id="m25cellnum"><span>  m</span>
				</div>
			</div>		
			<div position="mainright" style="float:right;width:50%;">	
				<div class="item">
					<span class="title">M2电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m2cellnum" id="m2cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M4电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m4cellnum" id="m4cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M6电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m6cellnum" id="m6cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M8电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m8cellnum" id="m8cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M10电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m10cellnum" id="m10cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M12电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m12cellnum" id="m12cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M14电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m14cellnum" id="m14cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M16电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m16cellnum" id="m16cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M18电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m18cellnum" id="m18cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M20电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m20cellnum" id="m20cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M22电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m22cellnum" id="m22cellnum"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">M24电池数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="m24cellnum" id="m24cellnum"><span>  m</span>
				</div>
			</div>				
        </div>
		<div title="充放电管理配置" id="cfg4">
			<div position="left" style="float:left;width:49%;">
				<div class="item">
					<span class="title">最大允许放电电流:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="maxdischargecurrent" id="maxdischargecurrent"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">充电机控制:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargercontrol" id="chargercontrol"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">充电请求电压设定:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargerequestvoltage" id="chargerequestvoltage"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电流比例:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="currentratio" id="currentratio"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电池组总容量:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="totalcapacity" id="totalcapacity"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电池组循环次数:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="cycletimes" id="cycletimes"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">风扇关闭温度阈值:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="fanclosetempthreshold" id="fanclosetempthreshold"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">加热关闭温度阈值:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="heatclosetempthreshold" id="heatclosetempthreshold"><span>  m</span>
				</div>
			</div>		
			<div position="mainright" style="float:right;width:50%;">	
				<div class="item">
					<span class="title">最大允许回充电流:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="maxrechargecurrent" id="maxrechargecurrent"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">充电请求电流设定:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="chargerequestcurrent" id="chargerequestcurrent"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电流校准:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="currentcalibration" id="currentcalibration"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电池组最大容量:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="maxcapacity" id="maxcapacity"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">电池组剩余容量:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="remaincapacity" id="remaincapacity"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">风扇开启温度阈值:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="fanopentempthreshold" id="fanopentempthreshold"><span>  m</span>
				</div>
				<div class="item">
					<span class="title">加热开启温度阈值:</span>
					<input type="text"  class="text_2" value="" maxlength="20" name="heatopentempthreshold" id="heatopentempthreshold"><span>  m</span>
				</div>
			</div>				
        </div>
    </div>  
	
    
    <div style="display:none;">
	</div>	
<div style="margin-left:320px;margin-top:20px;">
	<input type="hidden"  name="cfgjsonstr" id="cfgjsonstr" value=""/>
				
	<input class="submit_1" style="float:center;" type="submit" id= "button" name="button" value="设置">
</div>	
		
</form>
</div>
</div>

</body>
</html>